(function(){var e,t,n,r,i,s,o,u;i=new function(){},u=i.toString,s=function(e,t,n){var r,i,s,o;n==null&&(n=function(e){return e}),o=n(t),i=0,r=e.length;while(i<r)s=i+r>>1,n(e[s])<o?i=s+1:r=s;return i},e=[].indexOf||function(e){var t,n,r,i,s;t=this;for(r=i=0,s=t.length;i<s;r=++i){n=t[r];if(n===e)return r}return-1},r=function(e){return e!==e},n=function(e){return((typeof window!="undefined"&&window!==null?window.isFinite:void 0)||global.isFinite)(e)&&!r(parseFloat(e))},t=function(e){return u.call(e)==="[object Array]"},o=[{name:"second",value:1e3},{name:"minute",value:6e4},{name:"hour",value:36e5},{name:"day",value:864e5},{name:"week",value:6048e5}],this.Humanize={},this.Humanize.intword=function(e,t,n){return n==null&&(n=2),this.compactInteger(e,n)},this.Humanize.compactInteger=function(e,t){var n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w;t==null&&(t=0),t=Math.max(t,0),u=parseInt(e,10),h=u<0?"-":"",p=Math.abs(u),v=""+p,a=v.length,f=[13,10,7,4],n=["T","B","M","k"];if(p<1e3)return t>0&&(v+="."+Array(t+1).join("0")),""+h+v;if(a>f[0]+3)return u.toExponential(t).replace("e+","x10^");for(y=0,b=f.length;y<b;y++){w=f[y];if(a>=w){o=w;break}}return r=a-o+1,d=v.split(""),g=d.slice(0,r),s=d.slice(r,r+t+1),m=g.join(""),i=s.join(""),i.length<t&&(i+=""+Array(t-i.length+1).join("0")),t===0?l=""+h+m+n[f.indexOf(o)]:(c=(+(""+m+"."+i)).toFixed(t),l=""+h+c+n[f.indexOf(o)]),l},this.Humanize.intcomma=function(e,t){return t==null&&(t=0),this.formatNumber(e,t)},this.Humanize.filesize=function(e){var t;return e>=1073741824?t=this.formatNumber(e/1073741824,2,"")+" GB":e>=1048576?t=this.formatNumber(e/1048576,2,"")+" MB":e>=1024?t=this.formatNumber(e/1024,0)+" KB":t=this.formatNumber(e,0)+this.pluralize(e," byte"),t},this.Humanize.formatNumber=function(e,t,n,r){var i,s,o,u,a,f,l,c=this;return t==null&&(t=0),n==null&&(n=","),r==null&&(r="."),u=function(e,t,n){return n?e.substr(0,n)+t:""},s=function(e,t,n){return e.substr(n).replace(/(\d{3})(?=\d)/g,"$1"+t)},o=function(e,t,n){return n?t+c.toFixed(Math.abs(e),n).split(".")[1]:""},l=this.normalizePrecision(t),f=e<0&&"-"||"",i=parseInt(this.toFixed(Math.abs(e||0),l),10)+"",a=i.length>3?i.length%3:0,f+u(i,n,a)+s(i,n,a)+o(e,r,l)},this.Humanize.toFixed=function(e,t){var n;return t==null&&(t=this.normalizePrecision(t,0)),n=Math.pow(10,t),(Math.round(e*n)/n).toFixed(t)},this.Humanize.normalizePrecision=function(e,t){return e=Math.round(Math.abs(e)),r(e)?t:e},this.Humanize.ordinal=function(e){var t,n,r,i;r=parseInt(e,10);if(r===0)return e;i=r%100;if(i===11||i===12||i===13)return r+"th";n=r%10;switch(n){case 1:t="st";break;case 2:t="nd";break;case 3:t="rd";break;default:t="th"}return r+t},this.Humanize.times=function(e,t){var r,i;t==null&&(t={});if(n(e)&&e>=0){r=parseFloat(e);switch(r){case 0:i=t[0]!=null||"never";break;case 1:i=t[1]!=null||"once";break;case 2:i=t[2]!=null||"twice";break;default:i=(t[r]||r)+" times"}}return i},this.Humanize.pluralize=function(e,t,n){if(e==null||t==null)return;return n==null&&(n=t+"s"),parseInt(e,10)===1?t:n},this.Humanize.truncate=function(e,t,n){return t==null&&(t=100),n==null&&(n="..."),e.length>t?e.substring(0,t-n.length)+n:e},this.Humanize.truncatewords=function(e,t){var n,r,i;n=e.split(" "),i="",r=0;while(r<t)n[r]!=null&&(i+=n[r]+" "),r++;if(n.length>t)return i+="..."},this.Humanize.truncatenumber=function(e,t,r){var i;return t==null&&(t=100),r==null&&(r="+"),i=null,n(e)&&n(t)&&e>t&&(i=t+r),(i||e).toString()},this.Humanize.oxford=function(e,t,n){var r,i,s;return s=e.length,s<2?""+e:s===2?e.join(" and "):(t!=null&&s>t?(r=s-t,i=t,n==null&&(n=", and "+r+" "+this.pluralize(r,"other"))):(i=-1,n=", and "+e[s-1]),e.slice(0,i).join(", ")+n)},this.Humanize.dictionary=function(e,t,n){var r,i,s,o;t==null&&(t=" is "),n==null&&(n=", "),s="";if(e!=null&&typeof e=="object"&&Object.prototype.toString.call(e)!=="[object Array]"){r=[];for(i in e)o=e[i],r.push(i+t+o);s=r.join(n)}return s},this.Humanize.frequency=function(e,n){var r,i,s;if(!t(e))return;return r=e.length,s=this.times(r),r===0?i=""+s+" "+n:i=""+n+" "+s,i},this.Humanize.pace=function(e,t,n){var r,i,s,u,a,f,l,c;n==null&&(n="time");if(e===0||t===0)return"No "+this.pluralize(n);i="Approximately",f=null,s=e/t;for(l=0,c=o.length;l<c;l++){r=o[l],u=s*r.value;if(u>1){f=r.name;break}}return f||(i="Less than",u=1,f=o[o.length-1].name),a=Math.round(u),n=this.pluralize(a,n),""+i+" "+a+" "+n+" per "+f},this.Humanize.nl2br=function(e,t){return t==null&&(t="<br/>"),e.replace(/\n/g,t)},this.Humanize.br2nl=function(e,t){return t==null&&(t="\r\n"),e.replace(/\<br\s*\/?\>/g,t)},this.Humanize.capitalize=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},this.Humanize.capitalizeAll=function(e){return e.replace(/(?:^|\s)\S/g,function(e){return e.toUpperCase()})},this.Humanize.titlecase=function(e){var t,n,r,i,s,o=this;return r=/\b(a|an|and|at|but|by|de|en|for|if|in|of|on|or|the|to|via|vs?\.?)\b/i,n=/\S+[A-Z]+\S*/,s=/\s+/,i=/-/,t=function(e,u,a){var f,l,c,h,p,d;u==null&&(u=!1),a==null&&(a=!0),c=[],l=e.split(u?i:s);for(f=p=0,d=l.length;p<d;f=++p)h=l[f],h.indexOf("-")!==-1?f===0||f===l.length-1?c.push(t(h,!0,!0)):c.push(t(h,!0,!1)):f!==0&&f!==l.length-1||!a?n.test(h)?c.push(h):r.test(h)?c.push(h.toLowerCase()):c.push(o.capitalize(h)):c.push(n.test(h)?h:o.capitalize(h));return c.join(u?"-":" ")},t(e)},typeof module!="undefined"&&module!==null&&(module.exports=this.Humanize)}).call(this);